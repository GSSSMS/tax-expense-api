// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int        @id @default(autoincrement())
  email    String     @unique
  password String
  Business Business[]
  Expense  Expense[]
}

model Business {
  id       Int       @id @default(autoincrement())
  name     String
  userId   Int
  user     User      @relation(fields: [userId], references: [id])
  currency String    @db.VarChar(3)
  Expense  Expense[]
}

model Expense {
  id          Int       @id @default(autoincrement())
  date        DateTime
  frequency   Frequency @default(ONETIME)
  description String
  payee       String
  amount      Int
  businessId  Int
  userId      Int
  Business    Business  @relation(fields: [businessId], references: [id])
  User        User      @relation(fields: [userId], references: [id])
  category    Category  @default(GENERAL)
  memo        String?
  amortized   Boolean   @default(false)
  currency    String    @db.VarChar(3)
  imageUrl    String?
}

enum Frequency {
  YEARLY
  DAILY
  MONTHLY
  ONETIME
}

enum Category {
  GENERAL
}
